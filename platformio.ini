; ESP32-S3 USB Host Configuration
; USB Host requires ESP32-S3 (not supported on ESP32-C3)

; Waveshare ESP32-S3-Zero (recommended)
; PHASE 1: CDC enabled for debugging during development
[env:esp32s3]
platform = espressif32
board = esp32-s3-devkitc-1  ; Use generic S3 board profile
framework = arduino
monitor_speed = 115200
upload_speed = 921600
board_build.filesystem = littlefs

lib_deps =
    bblanchon/ArduinoJson@^7.0.0
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.1
    ; EspUsbHost will be enabled in Phase 2 when we switch to OTG mode
    ; https://github.com/wakwak-koba/EspUsbHost.git

build_flags =
    -DARDUINO_USB_MODE=1           ; 1 = CDC mode (for debugging), 0 = OTG mode
    -DARDUINO_USB_CDC_ON_BOOT=1    ; Enable CDC for Serial.print() debugging

; PHASE 2: OTG mode for USB Host (enable after base functionality is working)
; Uncomment this environment and switch to it when ready for USB Host testing
; [env:esp32s3_usb_host]
; platform = espressif32
; board = esp32-s3-devkitc-1
; framework = arduino
; monitor_speed = 115200
; upload_speed = 921600
; board_build.filesystem = littlefs
;
; lib_deps =
;     bblanchon/ArduinoJson@^7.0.0
;     me-no-dev/ESPAsyncWebServer@^1.2.3
;     me-no-dev/AsyncTCP@^1.1.1
;     https://github.com/wakwak-koba/EspUsbHost.git
;
; build_flags =
;     -DARDUINO_USB_MODE=0           ; 0 = OTG mode (for USB Host)
;     -DARDUINO_USB_CDC_ON_BOOT=0    ; Disable CDC to enable OTG

; Alternative: M5Stack ATOMS3 (compact with display)
[env:m5stack_atoms3]
platform = espressif32
board = m5stack-atoms3
framework = arduino
monitor_speed = 115200
upload_speed = 921600
board_build.filesystem = littlefs

lib_deps =
    bblanchon/ArduinoJson@^7.0.0
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.1
    https://github.com/wakwak-koba/EspUsbHost.git

build_flags =
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
